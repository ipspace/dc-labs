{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Building Next-Generation Data Center Networking engineers attending the Building Next-Generation Data Center online course had to solve several design assignments, including: Define the Services and Requirements Design a Storage Solution Build a Small Data Center Fabric Design a Robust Layer-2 Fabric Design an Overlay Virtual Network Fabric Extend a Leaf-and-Spine Fabric I reviewed every single solution submitted by the course attendees. I can\u2019t do the same for everyone else, but you might still want to try to solve at least some of the challenges.","title":"Home"},{"location":"#building-next-generation-data-center","text":"Networking engineers attending the Building Next-Generation Data Center online course had to solve several design assignments, including: Define the Services and Requirements Design a Storage Solution Build a Small Data Center Fabric Design a Robust Layer-2 Fabric Design an Overlay Virtual Network Fabric Extend a Leaf-and-Spine Fabric I reviewed every single solution submitted by the course attendees. I can\u2019t do the same for everyone else, but you might still want to try to solve at least some of the challenges.","title":"Building Next-Generation Data Center"},{"location":"1-services-requirements/","text":"Define the Services and Requirements You have to design a new data center infrastructure that will support the emerging needs of your organization. This hands-on assignment is the first step in that process. Use your existing environment if you\u2019re an end-user, the environment of one of your customers, or maybe a sample project you were asked to work on and document the service requirements: What services will the new data center offer? How will the users consume the services? What level of self-provisioning and automation will you offer? Will the users deploy application stacks themselves? Will they manage their own security and network services? Disaster recovery requirements. Based on these requirements, try to estimate the infrastructure requirements: Number of servers and storage nodes; Security- and network services needed to support the user requirements; Storage access technology; Required number of network ports; Estimated network bandwidth (internal and external); Virtual networking needs; IP address mobility requirements.","title":"Define the Services and Requirements"},{"location":"1-services-requirements/#define-the-services-and-requirements","text":"You have to design a new data center infrastructure that will support the emerging needs of your organization. This hands-on assignment is the first step in that process. Use your existing environment if you\u2019re an end-user, the environment of one of your customers, or maybe a sample project you were asked to work on and document the service requirements: What services will the new data center offer? How will the users consume the services? What level of self-provisioning and automation will you offer? Will the users deploy application stacks themselves? Will they manage their own security and network services? Disaster recovery requirements. Based on these requirements, try to estimate the infrastructure requirements: Number of servers and storage nodes; Security- and network services needed to support the user requirements; Storage access technology; Required number of network ports; Estimated network bandwidth (internal and external); Virtual networking needs; IP address mobility requirements.","title":"Define the Services and Requirements"},{"location":"11-extend-fabric/","text":"Extend a Leaf-and-Spine Fabric The customer is building a new data center and wants to extend the existing fabric in the current data center to the new data center. The data centers are 10 kilometers 1 apart and will be linked with two 100GE links (the customer is buying lambdas from a metro SP and trying to push as much as possible on a single lambda). The existing fabric is a reasonably large leaf-and-spine fabric with four spine nodes using 100GE leaf-to-spine links and 25GE server-facing ports. The fabric in the new data center will be smaller \u2013 initially, it will have two spine nodes, potentially expanding to four spine nodes as the data center workload grows. The customer asked you to design the data center interconnect that should use the minimum amount of links (because they don\u2019t own the fiber) and ideally require no additional equipment. When designing the solution, evaluate all potential failure scenarios. The amount of traffic between data centers will be significant, so you must ensure that link or node failures don\u2019t result in overloaded leaf-to-spine links within the data center fabrics. Or miles if you don\u2019t believe in the metric system. \u21a9","title":"Extend a Leaf-and-Spine Fabric"},{"location":"11-extend-fabric/#extend-a-leaf-and-spine-fabric","text":"The customer is building a new data center and wants to extend the existing fabric in the current data center to the new data center. The data centers are 10 kilometers 1 apart and will be linked with two 100GE links (the customer is buying lambdas from a metro SP and trying to push as much as possible on a single lambda). The existing fabric is a reasonably large leaf-and-spine fabric with four spine nodes using 100GE leaf-to-spine links and 25GE server-facing ports. The fabric in the new data center will be smaller \u2013 initially, it will have two spine nodes, potentially expanding to four spine nodes as the data center workload grows. The customer asked you to design the data center interconnect that should use the minimum amount of links (because they don\u2019t own the fiber) and ideally require no additional equipment. When designing the solution, evaluate all potential failure scenarios. The amount of traffic between data centers will be significant, so you must ensure that link or node failures don\u2019t result in overloaded leaf-to-spine links within the data center fabrics. Or miles if you don\u2019t believe in the metric system. \u21a9","title":"Extend a Leaf-and-Spine Fabric"},{"location":"4-storage/","text":"Design a Storage Solution You\u2019re designing a greenfield data center. Most workloads will be virtualized; the database servers might be virtualized or running on bare metal. The storage administrators expect these types of storage requirements: VM virtual disks (not critical, could be restored from daily backup); Databases (mission-critical, must be replicated); Tape-based backup (accessible via Fibre Channel only). Select the optimal: Storage solution (or a mix of solutions); SAN transport technology (FC, FCoE, or Ethernet); Storage access protocol (FC, iSCSI, NFS, SMB, or something else). Design a SAN access network or a unified leaf-and-spine networking infrastructure based on your selection. Need Help? These webinars will help you complete the assignment: Data Center 3.0 (the storage sections) Build the private cloud infrastructure (storage and networking sections) Hyper-Converged Infrastructure Deep Dive VMware Networking Deep Dive (VMkernel adapters) You might find these blog posts useful: Is Fibre Channel Still a Thing? Why I\u2019ve lost interest in hyperconverged (Chuck Hollis in his Oracle days) Storage networking is different Does dedicated iSCSI infrastructure make sense? iSCSI or FCoE?","title":"Design a Storage Solution"},{"location":"4-storage/#design-a-storage-solution","text":"You\u2019re designing a greenfield data center. Most workloads will be virtualized; the database servers might be virtualized or running on bare metal. The storage administrators expect these types of storage requirements: VM virtual disks (not critical, could be restored from daily backup); Databases (mission-critical, must be replicated); Tape-based backup (accessible via Fibre Channel only). Select the optimal: Storage solution (or a mix of solutions); SAN transport technology (FC, FCoE, or Ethernet); Storage access protocol (FC, iSCSI, NFS, SMB, or something else). Design a SAN access network or a unified leaf-and-spine networking infrastructure based on your selection.","title":"Design a Storage Solution"},{"location":"4-storage/#need-help","text":"These webinars will help you complete the assignment: Data Center 3.0 (the storage sections) Build the private cloud infrastructure (storage and networking sections) Hyper-Converged Infrastructure Deep Dive VMware Networking Deep Dive (VMkernel adapters) You might find these blog posts useful: Is Fibre Channel Still a Thing? Why I\u2019ve lost interest in hyperconverged (Chuck Hollis in his Oracle days) Storage networking is different Does dedicated iSCSI infrastructure make sense? iSCSI or FCoE?","title":"Need Help?"},{"location":"5-small-fabric/","text":"Build a Small Data Center Fabric The customer is buying new Ethernet fabric infrastructure for their data center. They collected existing connectivity requirements and got these numbers: 32 servers with 2 x 25GE ports; 40 1GE copper ports used mostly by servers but also for storage and appliance management ports; iSCSI-based storage (total of 8 x 10GE ports) 4 network appliances (firewalls, load balancers\u2026) with 2 10GE ports each; 2 WAN routers with 1 Gbps uplinks and 10GE connection to the fabric. Design an Ethernet fabric that will be: As cost-effective as possible while meeting current connectivity requirements; Easy to extend as the connectivity needs grow. They plan to increase the number of servers to 50 in the next three years, and they expect the servers to have 2 x 25GE ports plus 1GE management port; Require minimum downtime during the expansions. You can use data center switching equipment from any vendor you prefer. Your design should also include a migration plan for unexpected fast-growth scenarios, for example, connecting up to 200 servers. Need Help? You might find these webinars and blog posts helpful: Build Enterprise Data Centers with Two Switches Building a Small Data Center Fabric with Four Switches Using EVPN in Very Small Data Center Fabrics Do We Need Leaf-and-Spine Fabrics?","title":"Build a Small Data Center Fabric"},{"location":"5-small-fabric/#build-a-small-data-center-fabric","text":"The customer is buying new Ethernet fabric infrastructure for their data center. They collected existing connectivity requirements and got these numbers: 32 servers with 2 x 25GE ports; 40 1GE copper ports used mostly by servers but also for storage and appliance management ports; iSCSI-based storage (total of 8 x 10GE ports) 4 network appliances (firewalls, load balancers\u2026) with 2 10GE ports each; 2 WAN routers with 1 Gbps uplinks and 10GE connection to the fabric. Design an Ethernet fabric that will be: As cost-effective as possible while meeting current connectivity requirements; Easy to extend as the connectivity needs grow. They plan to increase the number of servers to 50 in the next three years, and they expect the servers to have 2 x 25GE ports plus 1GE management port; Require minimum downtime during the expansions. You can use data center switching equipment from any vendor you prefer. Your design should also include a migration plan for unexpected fast-growth scenarios, for example, connecting up to 200 servers.","title":"Build a Small Data Center Fabric"},{"location":"5-small-fabric/#need-help","text":"You might find these webinars and blog posts helpful: Build Enterprise Data Centers with Two Switches Building a Small Data Center Fabric with Four Switches Using EVPN in Very Small Data Center Fabrics Do We Need Leaf-and-Spine Fabrics?","title":"Need Help?"},{"location":"6-robust-layer-2-fabric/","text":"Design a Robust Layer-2 Fabric ACME Inc. is replacing an existing data center fabric with a next-generation solution. They have two data centers less than 100 km apart and decided to implement a layer-2 interconnect and long-distance vMotion to simplify hardware maintenance. Most compute workloads are virtualized, but they still have a cluster of bare-metal servers running legacy database servers. Existing Fabric Design ACME architects are aware of the limitations of stretched VLANs (including increased latency and traffic flows crossing the data center interconnect) and have tried to limit their impact by deploying each application stack mainly within a single data center: Each data center is assigned a /16 prefix from 10.0.0.0/8 address space; Legacy application stacks (or groups of applications) are assigned to one of the data centers and get a single VLAN and a single /24 IP subnet belonging to that data center; Applications with scale-out architecture are assigned two VLANs and two /24 IP subnets (one from the address space of each data center); A typical addressing plan is shown in the following diagram: All VLANs are stretched across both data centers, allowing unlimited (but controlled) VM mobility. However, ACME took these precautions to minimize cross-DC traffic: Hosts belonging to a single IP subnet SHOULD reside within a single data center but COULD be moved to the other data center if needed; Applications SHOULD use common services (example: Windows AD, backup\u2026) within the same data center but COULD use services from the other data center (example: shared database). You\u2019ll find an overview of L2/L3 connectivity in the following diagram: External Connectivity Application segments are connected to a shared transit segment through stateful firewalls. Each application segment is an independent virtual context within the firewall. The firewalls are physical appliances deployed in an active/backup stretched cluster. Each virtual context is active only on one of the appliances, while different contexts could be active on different appliances to get per-context load balancing. The primary virtual context for each application is within the same data center as its application (the following diagram displays a few contexts). New Fabric Requirements ACME wants to replace the existing L2-only fabric that uses the Spanning Tree Protocol (STP) and MLAG with a modern data center fabric without changing applications or firewall configurations. Given these limitations, design the most stable data center fabric you can.","title":"Design a Robust Layer-2 Fabric"},{"location":"6-robust-layer-2-fabric/#design-a-robust-layer-2-fabric","text":"ACME Inc. is replacing an existing data center fabric with a next-generation solution. They have two data centers less than 100 km apart and decided to implement a layer-2 interconnect and long-distance vMotion to simplify hardware maintenance. Most compute workloads are virtualized, but they still have a cluster of bare-metal servers running legacy database servers.","title":"Design a Robust Layer-2 Fabric"},{"location":"6-robust-layer-2-fabric/#existing-fabric-design","text":"ACME architects are aware of the limitations of stretched VLANs (including increased latency and traffic flows crossing the data center interconnect) and have tried to limit their impact by deploying each application stack mainly within a single data center: Each data center is assigned a /16 prefix from 10.0.0.0/8 address space; Legacy application stacks (or groups of applications) are assigned to one of the data centers and get a single VLAN and a single /24 IP subnet belonging to that data center; Applications with scale-out architecture are assigned two VLANs and two /24 IP subnets (one from the address space of each data center); A typical addressing plan is shown in the following diagram: All VLANs are stretched across both data centers, allowing unlimited (but controlled) VM mobility. However, ACME took these precautions to minimize cross-DC traffic: Hosts belonging to a single IP subnet SHOULD reside within a single data center but COULD be moved to the other data center if needed; Applications SHOULD use common services (example: Windows AD, backup\u2026) within the same data center but COULD use services from the other data center (example: shared database). You\u2019ll find an overview of L2/L3 connectivity in the following diagram:","title":"Existing Fabric Design"},{"location":"6-robust-layer-2-fabric/#external-connectivity","text":"Application segments are connected to a shared transit segment through stateful firewalls. Each application segment is an independent virtual context within the firewall. The firewalls are physical appliances deployed in an active/backup stretched cluster. Each virtual context is active only on one of the appliances, while different contexts could be active on different appliances to get per-context load balancing. The primary virtual context for each application is within the same data center as its application (the following diagram displays a few contexts).","title":"External Connectivity"},{"location":"6-robust-layer-2-fabric/#new-fabric-requirements","text":"ACME wants to replace the existing L2-only fabric that uses the Spanning Tree Protocol (STP) and MLAG with a modern data center fabric without changing applications or firewall configurations. Given these limitations, design the most stable data center fabric you can.","title":"New Fabric Requirements"},{"location":"7-overlay/","text":"Design an Overlay Virtual Network Fabric ACME Inc (see the previous design assignment for more details on their data center design) has successfully virtualized all their compute workloads and wants to migrate from the existing layer-2 data center fabric to an overlay virtual networking solution based on VMware NSX. At the same time, they want to replace the existing firewall appliances with virtual firewalls, replacing each firewall context with a dedicated virtual firewall. Note: While most applications don\u2019t require a redundant virtual firewall solution, a few mission-critical applications do. Design an overlay virtual networking solution for ACME Inc. and redesign the physical fabric to support the overlay virtual networking. Need Help? These webinars will help you complete the assignment: VMware NSX Technical Deep Dive Overlay Virtual Networking VXLAN Technical Deep Dive (Introduction and VXLAN Data Plane sections, and NSX-related parts) Virtual firewalls (Introduction and Virtual Firewall Appliances sections)","title":"Design an Overlay Virtual Network Fabric"},{"location":"7-overlay/#design-an-overlay-virtual-network-fabric","text":"ACME Inc (see the previous design assignment for more details on their data center design) has successfully virtualized all their compute workloads and wants to migrate from the existing layer-2 data center fabric to an overlay virtual networking solution based on VMware NSX. At the same time, they want to replace the existing firewall appliances with virtual firewalls, replacing each firewall context with a dedicated virtual firewall. Note: While most applications don\u2019t require a redundant virtual firewall solution, a few mission-critical applications do. Design an overlay virtual networking solution for ACME Inc. and redesign the physical fabric to support the overlay virtual networking.","title":"Design an Overlay Virtual Network Fabric"},{"location":"7-overlay/#need-help","text":"These webinars will help you complete the assignment: VMware NSX Technical Deep Dive Overlay Virtual Networking VXLAN Technical Deep Dive (Introduction and VXLAN Data Plane sections, and NSX-related parts) Virtual firewalls (Introduction and Virtual Firewall Appliances sections)","title":"Need Help?"}]}